var Pt=Object.defineProperty;var Rt=(D,v,y)=>v in D?Pt(D,v,{enumerable:!0,configurable:!0,writable:!0,value:y}):D[v]=y;var g=(D,v,y)=>Rt(D,typeof v!="symbol"?v+"":v,y);(function(){"use strict";var D=document.createElement("style");D.textContent=`.widget__container{box-shadow:0 0 18px 8px #0000001a,0 0 32px 32px #00000014;width:100%;overflow:auto;transition:max-height .2s ease;font-family:Helvetica,Arial,sans-serif;background-color:#fff;border-radius:10px;box-sizing:border-box}.widget__container *{box-sizing:border-box;font-size:16px}.widget__container h3,.widget__container p,.widget__container input{margin:0;padding:0}.widget__container .widget__header{padding:1.5rem 2rem;background-color:#000;color:#fff;border-top-left-radius:10px;border-top-right-radius:10px;text-align:center}.widget__container .widget__header h3{font-size:24px;font-weight:400;margin-bottom:8px}.widget__container #confirmation-message-container{color:green;display:flex;flex-direction:column;justify-content:center;align-items:center;height:80vh}.widget__container #confirmation-message-container #confirmation-message{font-size:1.5rem}.widget__container #confirmation-message-container,.widget__container #error-message{display:none;margin:2rem 1rem 1rem;padding:.75rem 1rem;border-radius:5px;font-weight:700}.widget__container #confirmation-booking-container{display:flex;align-items:center;margin-top:1rem;margin-right:1rem}.widget__container #confirmation-booking-number-of-covers{margin-right:.5rem}.widget__container #error-message{color:red;border:2px solid red}.widget__container form{padding:2rem 1rem 1.5rem}.widget__container form .form-group-right{display:flex;flex-direction:column;width:100%}@media screen and (min-width: 768px){.widget__container form .form-group-right{align-self:flex-start}}.widget__container form .form__field{margin-bottom:1.5rem;display:flex;flex-direction:column;width:100%}.widget__container form .form__field__required{display:flex}.widget__container form .form__field__group{display:flex;flex-flow:row wrap;align-items:center}@media screen and (min-width: 768px){.widget__container form .form__field__group{flex-flow:row nowrap}}@media screen and (min-width: 768px){.widget__container form .form__field.last-name{margin-left:1rem}}.widget__container form .form__field input,.widget__container form .form__field textarea{border:1px solid rgba(0,0,0,.6784313725);border-radius:3px;padding:8px 10px;background-color:#fff}.widget__container form .form__field input{height:48px}.widget__container form .form__field textarea::placeholder{font-family:Helvetica,Arial,sans-serif}.widget__container form .form__field label{margin-bottom:8px;font-size:1rem}.widget__container .required-field-symbol{color:red;font-size:1.5rem;margin-left:.25rem}.widget__container button{height:48px;border-radius:6px;font-size:18px;background-color:#000;color:#fff;border:0;width:100%;cursor:pointer}.widget__container button:hover{background-color:#1d1d20;color:#fff}.widget__container .info{margin-bottom:.5rem}.widget__container .muted{font-size:.75rem;color:gray}.widget__container wc-datepicker{justify-content:center}@media screen and (min-width: 768px){.widget__container wc-datepicker{justify-content:flex-start}}.widget__container wc-datepicker .wc-datepicker__previous-month-button,.widget__container wc-datepicker .wc-datepicker__next-month-button{flex-shrink:unset;height:auto}.widget__container wc-datepicker .wc-datepicker__current-month{align-items:center}.widget__container wc-datepicker select.wc-datepicker__month-select,.widget__container wc-datepicker input.wc-datepicker__year-select{font-weight:700;border:1px solid lightgrey;height:32px;text-align:center}.widget__container .time-select-container{display:flex;flex-flow:row nowrap;justify-content:center;margin:2rem 0;gap:1rem}@media screen and (min-width: 768px){.widget__container .time-select-container{justify-content:flex-start;margin-left:1rem}}.widget__container .time-select{padding:.75rem 1rem}.widget__container .time-select:hover{cursor:pointer}.widget__container .wrapper{height:30%;display:flex;justify-content:center;align-items:center}.widget__container .checkmark{width:56px;height:56px;border-radius:50%;display:block;stroke-width:2;stroke:#fff;stroke-miterlimit:10;margin:10% auto;box-shadow:inset 0 0 green;animation:fill .4s ease-in-out .4s forwards,scale .3s ease-in-out .9s both}.widget__container .checkmark__circle{stroke-dasharray:166;stroke-dashoffset:166;stroke-width:2;stroke-miterlimit:10;stroke:green;fill:none;animation:stroke .6s cubic-bezier(.65,0,.45,1) forwards}.widget__container .checkmark__check{transform-origin:50% 50%;stroke-dasharray:48;stroke-dashoffset:48;animation:stroke .3s cubic-bezier(.65,0,.45,1) .8s forwards}@keyframes stroke{to{stroke-dashoffset:0}}@keyframes scale{0%,to{transform:none}50%{transform:scale3d(1.1,1.1,1)}}@keyframes fill{to{box-shadow:inset 0 0 0 30px green}}wc-datepicker,wc-datepicker *,wc-datepicker *:before,wc-datepicker *:after{margin:0;padding:0;box-sizing:border-box}wc-datepicker{display:inline-flex}.wc-datepicker{display:block;width:min-content;min-width:17rem;max-width:24rem;border:.0625rem solid #f2f3f5;color:#111;background-color:#fff;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5}.wc-datepicker--disabled *:disabled{opacity:.5;cursor:default}.wc-datepicker--disabled .wc-datepicker__weekday{color:#767676}.wc-datepicker--disabled .wc-datepicker__date:focus>*{outline:none}.wc-datepicker--disabled .wc-datepicker__date{cursor:default;opacity:.5}.wc-datepicker--disabled .wc-datepicker__date:hover>*{background-color:transparent}.wc-datepicker--disabled .wc-datepicker__date--in-range:hover>*{background-color:#f2f3f5}.wc-datepicker--disabled .wc-datepicker__date--selected:hover>*{color:#fff;background-color:#00f}.wc-datepicker__header{display:flex;padding:.75rem;align-items:center;gap:.5rem}.wc-datepicker__current-month{display:flex;flex-grow:1;gap:.5rem}.wc-datepicker__month-select,.wc-datepicker__year-select{display:flex;height:2rem;padding-right:.5rem;padding-left:.5rem;align-items:center;border:none;border-radius:.25rem;color:#111;background:#f2f3f5;font:inherit;line-height:1.125}.wc-datepicker__month-select{flex-grow:1;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none}.wc-datepicker__year-select{max-width:5rem}.wc-datepicker__previous-month-button,.wc-datepicker__next-month-button,.wc-datepicker__previous-year-button,.wc-datepicker__next-year-button{display:inline-flex;width:2rem;height:2rem;padding:.375rem;flex-shrink:0;justify-content:center;align-items:center;border:none;border-radius:.25rem;color:#111;background-color:transparent;background-color:#f2f3f5;cursor:pointer}.wc-datepicker__body{padding-right:.75rem;padding-bottom:.75rem;padding-left:.75rem}.wc-datepicker__calendar{width:100%;table-layout:fixed;border-collapse:collapse}.wc-datepicker__weekday>span{display:flex;padding:.125rem;justify-content:center;align-items:center;font-weight:600;aspect-ratio:1}.wc-datepicker__date{padding:.125rem;text-align:center;cursor:pointer}.wc-datepicker__date:focus{outline:none}.wc-datepicker__date:focus>*{outline:.125rem solid #0000ff}.wc-datepicker__date:hover>*{background-color:#f2f3f5}.wc-datepicker__date>*{display:flex;justify-content:center;align-items:center;border-radius:.25rem;aspect-ratio:1}.wc-datepicker__date--today>*{font-weight:700;font-style:normal}.wc-datepicker__date--in-range>*{background-color:#f2f3f5}.wc-datepicker__date--selected>*,.wc-datepicker__date--selected:hover>*{color:#fff;background-color:#00f;font-weight:500}.wc-datepicker__date--disabled{color:#767676;cursor:default}.wc-datepicker__date--disabled:not(.wc-datepicker__date--selected):not(.wc-datepicker__date--in-range):hover>*{background-color:transparent}.wc-datepicker__date--disabled.wc-datepicker__date--in-range:not(.wc-datepicker__date--selected):not(.wc-datepicker__date--in-range)>*{background-color:transparent}.wc-datepicker__footer{display:flex;padding-right:.75rem;padding-bottom:.75rem;padding-left:.75rem;align-items:center;gap:.5rem}.wc-datepicker__clear-button,.wc-datepicker__today-button{display:inline-flex;height:2rem;padding-right:.5rem;padding-left:.5rem;justify-content:center;align-items:center;border:none;border-radius:.25rem;color:#111;background-color:#f2f3f5;font:inherit;line-height:1;cursor:pointer}
`,document.head.appendChild(D);const v=({heading:t,buttonText:e,formId:n,datePickerHiddenInputId:i,datePickerId:s,maxCoversPerBooking:r,timePickerHoursId:o,timePickerMinutesId:a,widgetPreview:l})=>`
  <header class="widget__header">
    <h3>${t}</h3>
  </header>

  <div id="error-message">Sorry, something went wrong. Please try again.</div>

  <div id="confirmation-message-container">
    <div class="wrapper">
      <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52"> <circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none"/> <path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/></svg>
    </div>
    <h3 id="confirmation-message">Booking confirmed!</h3>
    <div id="confirmation-booking-container">
      <span id="confirmation-booking-number-of-covers"></span>
      <span id="confirmation-booking-datetime"></span>
    </div>
  </div>

  <form id="${n}">
    <input type="hidden" id="widget-submission" name="widget-submission" value="true">
    <div class="form__field__group">
      <div class="form__field">
        <div class="form__field__required">
          <label for="booking[date]">Booking (date and time)</label><span class="required-field-symbol">*</span>
          <input type="hidden" id="${i}" name="booking[date]">
        </div>
        <wc-datepicker id="${s}" first-day-of-week="1" id="${s}"></wc-datepicker>
        <div class="time-select-container">
          <select id="${o}" name="booking[time][hours]" required class="time-select" data-time="hours">
            <option value="0">00</option>
            <option value="1">01</option>
            <option value="2">02</option>
            <option value="3">03</option>
            <option value="4">04</option>
            <option value="5">05</option>
            <option value="6">06</option>
            <option value="7">07</option>
            <option value="8">08</option>
            <option value="9">09</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
            <option value="13">13</option>
            <option value="14">14</option>
            <option value="15">15</option>
            <option value="16">16</option>
            <option value="17">17</option>
            <option value="18">18</option>
            <option value="19">19</option>
            <option value="20">20</option>
            <option value="21">21</option>
            <option value="22">22</option>
            <option value="23">23</option>
          </select>
          <select id="${a}" name="booking[time][minutes]" required class="time-select" data-time="minutes">
            <option value="00">00</option>
            <option value="15">15</option>
            <option value="30">30</option>
            <option value="45">45</option>
          </select>
        </div>
      </div>
      <div class="form-group-right">
        <div class="form__field form__field__required">
          <div class="form__field__required">
            <label id="number_of_covers_label" for="booking[number_of_covers]">Guests${r?` (Max: ${r})`:""}</label><span class="required-field-symbol">*</span>
          </div>
          <input
            type="number"
            id="number_of_covers"
            name="booking[number_of_covers]"
            placeholder="1"
            min="1"
            required
          />
        </div>
        <section class="customer-details">
          <div class="form__field__group">
            <div class="form__field">
              <div class="form__field__required">
                <label for="customer[first_name]">First name</label><span class="required-field-symbol" id="customer_first_name_required_symbol">*</span>
              </div>
              <input
                type="text"
                id="customer_first_name"
                name="customer[first_name]"
                placeholder="Enter your first name"
                required
              />
            </div>
            <div class="form__field last-name">
              <div class="form__field__required">
                <label for="customer[last_name]">Last name</label><span class="required-field-symbol" id="customer_last_name_required_symbol">*</span>
              </div>
              <input
                type="text"
                id="customer_last_name"
                name="customer[last_name]"
                placeholder="Enter your last name"
                required
              />
            </div>
          </div>
          <div class="form__field">
            <div class="form__field__required">
              <label for="customer[email]">Email</label><span class="required-field-symbol">*</span>
            </div>
            <p class="info muted">We send the booking confirmation to this email address</p>
            <input
              type="email"
              id="email"
              name="customer[email]"
              placeholder="Enter your email address"
            />
          </div>
          <div class="form__field">
            <label for="customer[phone]">Phone number</label>
            <p class="info muted">We may use this to contact you about your booking</p>
            <input
              type="phone"
              id="phone"
              name="customer[phone]"
              placeholder="Enter your phone number"
            />
          </div>
        </section>
      </div>
    </div>

    <div class="form__field">
      <label for="booking[notes]">Notes</label>
      <textarea
        id="notes"
        name="booking[notes]"
        placeholder="Enter any additional notes"
        rows="6"
      ></textarea>
    </div>

    <button type="submit" ${l?"disabled=true":""}>${e}</button>
  </form>
`,y={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let E,Z,O,V=!1,P=!1,U=!1,$=!1,ee=null,z=!1;const x=(t,e="")=>()=>{},te="http://www.w3.org/1999/xlink",ne={},Fe="http://www.w3.org/2000/svg",Oe="http://www.w3.org/1999/xhtml",Pe=t=>t!=null,K=t=>(t=typeof t,t==="object"||t==="function");function Re(t){var e,n,i;return(i=(n=(e=t.head)===null||e===void 0?void 0:e.querySelector('meta[name="csp-nonce"]'))===null||n===void 0?void 0:n.getAttribute("content"))!==null&&i!==void 0?i:void 0}const f=(t,e,...n)=>{let i=null,s=null,r=null,o=!1,a=!1;const l=[],c=d=>{for(let h=0;h<d.length;h++)i=d[h],Array.isArray(i)?c(i):i!=null&&typeof i!="boolean"&&((o=typeof t!="function"&&!K(i))&&(i=String(i)),o&&a?l[l.length-1].$text$+=i:l.push(o?R(null,i):i),a=o)};if(c(n),e){e.key&&(s=e.key),e.name&&(r=e.name);{const d=e.className||e.class;d&&(e.class=typeof d!="object"?d:Object.keys(d).filter(h=>d[h]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,l,Ae);const u=R(t,null);return u.$attrs$=e,l.length>0&&(u.$children$=l),u.$key$=s,u.$name$=r,u},R=(t,e)=>{const n={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return n.$attrs$=null,n.$key$=null,n.$name$=null,n},ie={},qe=t=>t&&t.$tag$===ie,Ae={forEach:(t,e)=>t.map(se).forEach(e),map:(t,e)=>t.map(se).map(e).map(He)},se=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),He=t=>{if(typeof t.vtag=="function"){const n=Object.assign({},t.vattrs);return t.vkey&&(n.key=t.vkey),t.vname&&(n.name=t.vname),f(t.vtag,n,...t.vchildren||[])}const e=R(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},je=t=>mt.map(e=>e(t)).find(e=>!!e),We=(t,e)=>t!=null&&!K(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,Ye=t=>t,oe=(t,e,n)=>{const i=Ye(t);return{emit:s=>Ue(i,e,{bubbles:!!(n&4),composed:!!(n&2),cancelable:!!(n&1),detail:s})}},Ue=(t,e,n)=>{const i=m.ce(e,n);return t.dispatchEvent(i),i},re=new WeakMap,ze=(t,e,n)=>{let i=j.get(t);wt&&n?(i=i||new CSSStyleSheet,typeof i=="string"?i=e:i.replaceSync(e)):i=e,j.set(t,i)},Ke=(t,e,n,i)=>{var s;let r=ae(e,n);const o=j.get(r);if(t=t.nodeType===11?t:b,o)if(typeof o=="string"){t=t.head||t;let a=re.get(t),l;if(a||re.set(t,a=new Set),!a.has(r)){{l=b.createElement("style"),l.innerHTML=o;const c=(s=m.$nonce$)!==null&&s!==void 0?s:Re(b);c!=null&&l.setAttribute("nonce",c),t.insertBefore(l,t.querySelector("link"))}a&&a.add(r)}}else t.adoptedStyleSheets.includes(o)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,o]);return r},Ge=t=>{const e=t.$cmpMeta$,n=t.$hostElement$,i=e.$flags$,s=x("attachStyles",e.$tagName$),r=Ke(n.shadowRoot?n.shadowRoot:n.getRootNode(),e,t.$modeName$);i&10&&(n["s-sc"]=r,n.classList.add(r+"-h"),i&2&&n.classList.add(r+"-s")),s()},ae=(t,e)=>"sc-"+(e&&t.$flags$&32?t.$tagName$+"-"+e:t.$tagName$),le=(t,e,n,i,s,r)=>{if(n!==i){let o=ve(t,e),a=e.toLowerCase();if(e==="class"){const l=t.classList,c=ce(n),u=ce(i);l.remove(...c.filter(d=>d&&!u.includes(d))),l.add(...u.filter(d=>d&&!c.includes(d)))}else if(e==="style"){for(const l in n)(!i||i[l]==null)&&(l.includes("-")?t.style.removeProperty(l):t.style[l]="");for(const l in i)(!n||i[l]!==n[l])&&(l.includes("-")?t.style.setProperty(l,i[l]):t.style[l]=i[l])}else if(e!=="key")if(e==="ref")i&&i(t);else if(!t.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):ve(W,a)?e=a.slice(2):e=a[2]+e.slice(3),n&&m.rel(t,e,n,!1),i&&m.ael(t,e,i,!1);else{const l=K(i);if((o||l&&i!==null)&&!s)try{if(t.tagName.includes("-"))t[e]=i;else{const u=i??"";e==="list"?o=!1:(n==null||t[e]!=u)&&(t[e]=u)}}catch{}let c=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(e=a,c=!0),i==null||i===!1?(i!==!1||t.getAttribute(e)==="")&&(c?t.removeAttributeNS(te,e):t.removeAttribute(e)):(!o||r&4||s)&&!l&&(i=i===!0?"":i,c?t.setAttributeNS(te,e,i):t.setAttribute(e,i))}}},Qe=/\s/,ce=t=>t?t.split(Qe):[],de=(t,e,n,i)=>{const s=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,r=t&&t.$attrs$||ne,o=e.$attrs$||ne;for(i in r)i in o||le(s,i,r[i],void 0,n,e.$flags$);for(i in o)le(s,i,r[i],o[i],n,e.$flags$)},q=(t,e,n,i)=>{const s=e.$children$[n];let r=0,o,a,l;if(V||(U=!0,s.$tag$==="slot"&&(E&&i.classList.add(E+"-s"),s.$flags$|=s.$children$?2:1)),s.$text$!==null)o=s.$elm$=b.createTextNode(s.$text$);else if(s.$flags$&1)o=s.$elm$=b.createTextNode("");else{if($||($=s.$tag$==="svg"),o=s.$elm$=b.createElementNS($?Fe:Oe,s.$flags$&2?"slot-fb":s.$tag$),$&&s.$tag$==="foreignObject"&&($=!1),de(null,s,$),Pe(E)&&o["s-si"]!==E&&o.classList.add(o["s-si"]=E),s.$children$)for(r=0;r<s.$children$.length;++r)a=q(t,s,r,o),a&&o.appendChild(a);s.$tag$==="svg"?$=!1:o.tagName==="foreignObject"&&($=!0)}return o["s-hn"]=O,s.$flags$&3&&(o["s-sr"]=!0,o["s-cr"]=Z,o["s-sn"]=s.$name$||"",l=t&&t.$children$&&t.$children$[n],l&&l.$tag$===s.$tag$&&t.$elm$&&L(t.$elm$,!1)),o},L=(t,e)=>{m.$flags$|=1;const n=t.childNodes;for(let i=n.length-1;i>=0;i--){const s=n[i];s["s-hn"]!==O&&s["s-ol"]&&(he(s).insertBefore(s,G(s)),s["s-ol"].remove(),s["s-ol"]=void 0,U=!0),e&&L(s,e)}m.$flags$&=-2},ue=(t,e,n,i,s,r)=>{let o=t["s-cr"]&&t["s-cr"].parentNode||t,a;for(o.shadowRoot&&o.tagName===O&&(o=o.shadowRoot);s<=r;++s)i[s]&&(a=q(null,n,s,t),a&&(i[s].$elm$=a,o.insertBefore(a,G(e))))},fe=(t,e,n,i,s)=>{for(;e<=n;++e)(i=t[e])&&(s=i.$elm$,$e(i),P=!0,s["s-ol"]?s["s-ol"].remove():L(s,!0),s.remove())},Je=(t,e,n,i)=>{let s=0,r=0,o=0,a=0,l=e.length-1,c=e[0],u=e[l],d=i.length-1,h=i[0],p=i[d],_,k;for(;s<=l&&r<=d;)if(c==null)c=e[++s];else if(u==null)u=e[--l];else if(h==null)h=i[++r];else if(p==null)p=i[--d];else if(A(c,h))B(c,h),c=e[++s],h=i[++r];else if(A(u,p))B(u,p),u=e[--l],p=i[--d];else if(A(c,p))(c.$tag$==="slot"||p.$tag$==="slot")&&L(c.$elm$.parentNode,!1),B(c,p),t.insertBefore(c.$elm$,u.$elm$.nextSibling),c=e[++s],p=i[--d];else if(A(u,h))(c.$tag$==="slot"||p.$tag$==="slot")&&L(u.$elm$.parentNode,!1),B(u,h),t.insertBefore(u.$elm$,c.$elm$),u=e[--l],h=i[++r];else{for(o=-1,a=s;a<=l;++a)if(e[a]&&e[a].$key$!==null&&e[a].$key$===h.$key$){o=a;break}o>=0?(k=e[o],k.$tag$!==h.$tag$?_=q(e&&e[r],n,o,t):(B(k,h),e[o]=void 0,_=k.$elm$),h=i[++r]):(_=q(e&&e[r],n,r,t),h=i[++r]),_&&he(c.$elm$).insertBefore(_,G(c.$elm$))}s>l?ue(t,i[d+1]==null?null:i[d+1].$elm$,n,i,r,d):r>d&&fe(e,s,l)},A=(t,e)=>t.$tag$===e.$tag$?t.$tag$==="slot"?t.$name$===e.$name$:t.$key$===e.$key$:!1,G=t=>t&&t["s-ol"]||t,he=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,B=(t,e)=>{const n=e.$elm$=t.$elm$,i=t.$children$,s=e.$children$,r=e.$tag$,o=e.$text$;let a;o===null?($=r==="svg"?!0:r==="foreignObject"?!1:$,r==="slot"||de(t,e,$),i!==null&&s!==null?Je(n,i,e,s):s!==null?(t.$text$!==null&&(n.textContent=""),ue(n,null,e,s,0,s.length-1)):i!==null&&fe(i,0,i.length-1),$&&r==="svg"&&($=!1)):(a=n["s-cr"])?a.parentNode.textContent=o:t.$text$!==o&&(n.data=o)},ge=t=>{const e=t.childNodes;let n,i,s,r,o,a;for(i=0,s=e.length;i<s;i++)if(n=e[i],n.nodeType===1){if(n["s-sr"]){for(o=n["s-sn"],n.hidden=!1,r=0;r<s;r++)if(a=e[r].nodeType,e[r]["s-hn"]!==n["s-hn"]||o!==""){if(a===1&&o===e[r].getAttribute("slot")){n.hidden=!0;break}}else if(a===1||a===3&&e[r].textContent.trim()!==""){n.hidden=!0;break}}ge(n)}},w=[],pe=t=>{let e,n,i,s,r,o,a=0;const l=t.childNodes,c=l.length;for(;a<c;a++){if(e=l[a],e["s-sr"]&&(n=e["s-cr"])&&n.parentNode)for(i=n.parentNode.childNodes,s=e["s-sn"],o=i.length-1;o>=0;o--)n=i[o],!n["s-cn"]&&!n["s-nr"]&&n["s-hn"]!==e["s-hn"]&&(me(n,s)?(r=w.find(u=>u.$nodeToRelocate$===n),P=!0,n["s-sn"]=n["s-sn"]||s,r?r.$slotRefNode$=e:w.push({$slotRefNode$:e,$nodeToRelocate$:n}),n["s-sr"]&&w.map(u=>{me(u.$nodeToRelocate$,n["s-sn"])&&(r=w.find(d=>d.$nodeToRelocate$===n),r&&!u.$slotRefNode$&&(u.$slotRefNode$=r.$slotRefNode$))})):w.some(u=>u.$nodeToRelocate$===n)||w.push({$nodeToRelocate$:n}));e.nodeType===1&&pe(e)}},me=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",$e=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map($e)},Xe=(t,e)=>{const n=t.$hostElement$,i=t.$cmpMeta$,s=t.$vnode$||R(null,null),r=qe(e)?e:f(null,null,e);O=n.tagName,i.$attrsToReflect$&&(r.$attrs$=r.$attrs$||{},i.$attrsToReflect$.map(([o,a])=>r.$attrs$[a]=n[o])),r.$tag$=null,r.$flags$|=4,t.$vnode$=r,r.$elm$=s.$elm$=n.shadowRoot||n,E=n["s-sc"],Z=n["s-cr"],V=(i.$flags$&1)!==0,P=!1,B(s,r);{if(m.$flags$|=1,U){pe(r.$elm$);let o,a,l,c,u,d,h=0;for(;h<w.length;h++)o=w[h],a=o.$nodeToRelocate$,a["s-ol"]||(l=b.createTextNode(""),l["s-nr"]=a,a.parentNode.insertBefore(a["s-ol"]=l,a));for(h=0;h<w.length;h++)if(o=w[h],a=o.$nodeToRelocate$,o.$slotRefNode$){for(c=o.$slotRefNode$.parentNode,u=o.$slotRefNode$.nextSibling,l=a["s-ol"];l=l.previousSibling;)if(d=l["s-nr"],d&&d["s-sn"]===a["s-sn"]&&c===d.parentNode&&(d=d.nextSibling,!d||!d["s-nr"])){u=d;break}(!u&&c!==a.parentNode||a.nextSibling!==u)&&a!==u&&(!a["s-hn"]&&a["s-ol"]&&(a["s-hn"]=a["s-ol"].parentNode.nodeName),c.insertBefore(a,u))}else a.nodeType===1&&(a.hidden=!0)}P&&ge(r.$elm$),m.$flags$&=-2,w.length=0}},Ze=(t,e)=>{},_e=(t,e)=>(t.$flags$|=16,Ze(t,t.$ancestorComponent$),kt(()=>Ve(t,e))),Ve=(t,e)=>{const n=t.$hostElement$,i=x("scheduleUpdate",t.$cmpMeta$.$tagName$),s=n;let r;return e?r=T(s,"componentWillLoad"):r=T(s,"componentWillUpdate"),r=ye(r,()=>T(s,"componentWillRender")),i(),ye(r,()=>et(t,s,e))},et=async(t,e,n)=>{const i=t.$hostElement$,s=x("update",t.$cmpMeta$.$tagName$);i["s-rc"],n&&Ge(t);const r=x("render",t.$cmpMeta$.$tagName$);tt(t,e,i),r(),s(),nt(t)},tt=(t,e,n)=>{try{ee=e,e=e.render&&e.render(),t.$flags$&=-17,t.$flags$|=2,(y.hasRenderFn||y.reflect)&&(y.vdomRender||y.reflect)&&(y.hydrateServerSide||Xe(t,e))}catch(a){N(a,t.$hostElement$)}return ee=null,null},nt=t=>{const e=t.$cmpMeta$.$tagName$,n=t.$hostElement$,i=x("postUpdate",e),s=n;t.$ancestorComponent$,T(s,"componentDidRender"),t.$flags$&64?(T(s,"componentDidUpdate"),i()):(t.$flags$|=64,T(s,"componentDidLoad"),i())},T=(t,e,n)=>{if(t&&t[e])try{return t[e](n)}catch(i){N(i)}},ye=(t,e)=>t&&t.then?t.then(e):e(),it=(t,e)=>H(t).$instanceValues$.get(e),st=(t,e,n,i)=>{const s=H(t),r=t,o=s.$instanceValues$.get(e),a=s.$flags$,l=r;n=We(n,i.$members$[e][0]);const c=Number.isNaN(o)&&Number.isNaN(n);if(n!==o&&!c){s.$instanceValues$.set(e,n);{if(i.$watchers$&&a&128){const d=i.$watchers$[e];d&&d.map(h=>{try{l[h](n,o,e)}catch(p){N(p,r)}})}if((a&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(n,o,e)===!1)return;_e(s,!1)}}}},ot=(t,e,n)=>{if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);const i=Object.entries(e.$members$),s=t.prototype;i.map(([r,[o]])=>{(o&31||o&32)&&Object.defineProperty(s,r,{get(){return it(this,r)},set(a){st(this,r,a,e)},configurable:!0,enumerable:!0})});{const r=new Map;s.attributeChangedCallback=function(o,a,l){m.jmp(()=>{const c=r.get(o);if(this.hasOwnProperty(c))l=this[c],delete this[c];else if(s.hasOwnProperty(c)&&typeof this[c]=="number"&&this[c]==l)return;this[c]=l===null&&typeof this[c]=="boolean"?!1:l})},t.observedAttributes=i.filter(([o,a])=>a[0]&15).map(([o,a])=>{const l=a[1]||o;return r.set(l,o),a[0]&512&&e.$attrsToReflect$.push([o,l]),l})}}return t},rt=async(t,e,n,i,s)=>{if(!(e.$flags$&32)&&(s=t.constructor,e.$flags$|=32,customElements.whenDefined(n.$tagName$).then(()=>e.$flags$|=128),s.style)){let o=s.style;typeof o!="string"&&(o=o[e.$modeName$=je(t)]);const a=ae(n,e.$modeName$);if(!j.has(a)){const l=x("registerStyles",n.$tagName$);ze(a,o,!!(n.$flags$&1)),l()}}e.$ancestorComponent$,_e(e,!0)},at=t=>{},lt=t=>{if(!(m.$flags$&1)){const e=H(t),n=e.$cmpMeta$,i=x("connectedCallback",n.$tagName$);e.$flags$&1?(we(t,e,n.$listeners$),at(e.$lazyInstance$)):(e.$flags$|=1,n.$flags$&12&&ct(t),n.$members$&&Object.entries(n.$members$).map(([s,[r]])=>{if(r&31&&t.hasOwnProperty(s)){const o=t[s];delete t[s],t[s]=o}}),rt(t,e,n)),i()}},ct=t=>{const e=t["s-cr"]=b.createComment("");e["s-cn"]=!0,t.insertBefore(e,t.firstChild)},dt=t=>{if(!(m.$flags$&1)){const e=H(t);e.$rmListeners$&&(e.$rmListeners$.map(n=>n()),e.$rmListeners$=void 0)}},ut=(t,e)=>{const n={$flags$:e[0],$tagName$:e[1]};n.$members$=e[2],n.$listeners$=e[3],n.$watchers$=t.$watchers$,n.$attrsToReflect$=[];const i=t.prototype.connectedCallback,s=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){pt(this,n)},connectedCallback(){lt(this),i&&i.call(this)},disconnectedCallback(){dt(this),s&&s.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(n.$flags$&16)})}}),t.is=n.$tagName$,ot(t,n)},we=(t,e,n,i)=>{n&&n.map(([s,r,o])=>{const a=ht(t,s),l=ft(e,o),c=gt(s);m.ael(a,r,l,c),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>m.rel(a,r,l,c))})},ft=(t,e)=>n=>{try{y.lazyLoad||t.$hostElement$[e](n)}catch(i){N(i)}},ht=(t,e)=>e&4?b:e&8?W:e&16?b.body:t,gt=t=>_t?{passive:(t&1)!==0,capture:(t&2)!==0}:(t&2)!==0,be=new WeakMap,H=t=>be.get(t),pt=(t,e)=>{const n={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return we(t,n,e.$listeners$),be.set(t,n)},ve=(t,e)=>e in t,N=(t,e)=>(0,console.error)(t,e),j=new Map,mt=[],W=typeof window<"u"?window:{},b=W.document||{head:{}},$t=W.HTMLElement||class{},m={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,n,i)=>t.addEventListener(e,n,i),rel:(t,e,n,i)=>t.removeEventListener(e,n,i),ce:(t,e)=>new CustomEvent(t,e)},_t=(()=>{let t=!1;try{b.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch{}return t})(),yt=t=>Promise.resolve(t),wt=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),ke=[],De=[],bt=(t,e)=>n=>{t.push(n),z||(z=!0,e&&m.$flags$&4?vt(Q):m.raf(Q))},Se=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(n){N(n)}t.length=0},Q=()=>{Se(ke),Se(De),(z=ke.length>0)&&m.raf(Q)},vt=t=>yt().then(t),kt=bt(De,!0);function xe(t,e){const n=new Date(t);return n.setDate(n.getDate()+e),n}function Dt(t,e,n){const i=[],s=J(t),r=s.getDay()===0?7:s.getDay(),o=Ce(t),a=o.getDay()===0?7:o.getDay(),l=n===1?7:n-1,c=[],u=[];{let p=(7-n+r)%7,_=X(s);for(;p>0;)c.push(_),_=X(_),p-=1;c.reverse();let F=(7-a+l)%7,I=Y(o);for(;F>0;)u.push(I),I=Y(I),F-=1}let d=s;for(;d.getMonth()===t.getMonth();)i.push(d),d=Y(d);return[...c,...i,...u]}function J(t){return M(new Date(`${String(Le(t)).padStart(4,"0")}-${String(Me(t)).padStart(2,"0")}-01`))}function C(t){if(t instanceof Date)return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}function Ce(t){const e=J(t);return e.setMonth(e.getMonth()+1),e.setDate(e.getDate()-1),e}function Me(t){return t.getMonth()+1}function St(t){return new Array(12).fill(void 0).map((e,n)=>{const i=M(new Date(`2006-${String(n+1).padStart(2,"0")}-01`));return Intl.DateTimeFormat(t,{month:"long"}).format(i)})}function Y(t){return xe(t,1)}function Ee(t){const e=new Date(t);return e.setDate(1),e.setMonth(e.getMonth()+1),e}function Be(t){const e=new Date(t);return e.setFullYear(e.getFullYear()+1),e}function X(t){return Ne(t,1)}function Te(t){const e=new Date(t);return e.setDate(1),e.setMonth(e.getMonth()-1),e}function Ie(t){const e=new Date(t);return e.setFullYear(e.getFullYear()-1),e}function xt(t,e){return new Array(7).fill(void 0).map((n,i)=>(t+i)%7+1).map(n=>{const i=M(new Date(`2006-01-0${n}`));return[Intl.DateTimeFormat(e,{weekday:"short"}).format(i),Intl.DateTimeFormat(e,{weekday:"long"}).format(i)]})}function Le(t){return t.getFullYear()}function Ct(t,e){if(!t||!e||!e.from||!e.to)return!1;const n=e.from<e.to?e.from:e.to,i=e.from<e.to?e.to:e.from;return t>=n&&t<=i}function S(t,e){return!t||!e?!1:t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}function M(t){const e=new Date(t);return e.setMinutes(e.getMinutes()+e.getTimezoneOffset()),e}function Ne(t,e){const n=new Date(t);return n.setDate(n.getDate()-e),n}const Mt=".visually-hidden.sc-wc-datepicker{position:absolute;overflow:hidden;width:1px;height:1px;white-space:nowrap;clip:rect(0 0 0 0);-webkit-clip-path:inset(50%);clip-path:inset(50%)}",Et={clearButton:"Clear value",monthSelect:"Select month",nextMonthButton:"Next month",nextYearButton:"Next year",picker:"Choose date",previousMonthButton:"Previous month",previousYearButton:"Previous year",todayButton:"Show today",yearSelect:"Select year"},Bt=ut(class extends $t{constructor(){super(),this.__registerHost(),this.selectDate=oe(this,"selectDate",7),this.changeMonth=oe(this,"changeMonth",7),this.disabled=!1,this.disableDate=()=>!1,this.elementClassName="wc-datepicker",this.firstDayOfWeek=0,this.labels=Et,this.locale=(navigator==null?void 0:navigator.language)||"en-US",this.showClearButton=!1,this.showMonthStepper=!0,this.showTodayButton=!1,this.showYearStepper=!1,this.startDate=C(new Date),this.init=()=>{this.currentDate=this.startDate?M(new Date(this.startDate)):new Date,this.updateWeekdays()},this.nextMonth=()=>{this.updateCurrentDate(Ee(this.currentDate))},this.nextYear=()=>{this.updateCurrentDate(Be(this.currentDate))},this.previousMonth=()=>{this.updateCurrentDate(Te(this.currentDate))},this.previousYear=()=>{this.updateCurrentDate(Ie(this.currentDate))},this.showToday=()=>{this.updateCurrentDate(new Date)},this.clear=()=>{this.value=void 0,this.selectDate.emit(void 0)},this.onClick=t=>{if(this.disabled)return;const e=t.target.closest("[data-date]");if(!e)return;const n=M(new Date(e.dataset.date));this.updateCurrentDate(n),this.onSelectDate(n)},this.onMonthSelect=t=>{const e=+t.target.value-1,n=new Date(this.currentDate);n.setMonth(e),this.updateCurrentDate(n)},this.onYearSelect=t=>{let e=+t.target.value;const n=t.target;isNaN(e)?(e=new Date().getFullYear(),n.value=String(e)):e<0?(e=0,n.value=String(e)):e>9999&&(e=9999,n.value=String(e));const i=new Date(this.currentDate);i.setFullYear(e),this.updateCurrentDate(i)},this.onKeyDown=t=>{this.disabled||(t.code==="ArrowLeft"?(t.preventDefault(),this.updateCurrentDate(X(this.currentDate),!0)):t.code==="ArrowRight"?(t.preventDefault(),this.updateCurrentDate(Y(this.currentDate),!0)):t.code==="ArrowUp"?(t.preventDefault(),this.updateCurrentDate(Ne(this.currentDate,7),!0)):t.code==="ArrowDown"?(t.preventDefault(),this.updateCurrentDate(xe(this.currentDate,7),!0)):t.code==="PageUp"?(t.preventDefault(),t.shiftKey?this.updateCurrentDate(Ie(this.currentDate),!0):this.updateCurrentDate(Te(this.currentDate),!0)):t.code==="PageDown"?(t.preventDefault(),t.shiftKey?this.updateCurrentDate(Be(this.currentDate),!0):this.updateCurrentDate(Ee(this.currentDate),!0)):t.code==="Home"?(t.preventDefault(),this.updateCurrentDate(J(this.currentDate),!0)):t.code==="End"?(t.preventDefault(),this.updateCurrentDate(Ce(this.currentDate),!0)):(t.code==="Space"||t.code==="Enter")&&(t.preventDefault(),this.onSelectDate(this.currentDate)))},this.onMouseEnter=t=>{if(this.disabled)return;const e=M(new Date(t.target.closest("td").dataset.date));this.hoveredDate=e},this.onMouseLeave=()=>{this.hoveredDate=void 0}}componentWillLoad(){this.init()}watchFirstDayOfWeek(){this.updateWeekdays()}watchLocale(){this.locale||(this.locale=(navigator==null?void 0:navigator.language)||"en-US"),this.updateWeekdays()}watchRange(){this.value=void 0,this.selectDate.emit(void 0)}watchStartDate(){this.currentDate=this.startDate?M(new Date(this.startDate)):new Date}watchValue(){this.value&&(Array.isArray(this.value)&&this.value.length>=1?this.currentDate=this.value[0]:this.value instanceof Date&&(this.currentDate=this.value))}componentDidRender(){this.moveFocusAfterMonthChanged&&(this.focusDate(this.currentDate),this.moveFocusAfterMonthChanged=!1)}updateWeekdays(){this.weekdays=xt(this.firstDayOfWeek===0?7:this.firstDayOfWeek,this.locale)}getClassName(t){return t?`${this.elementClassName}__${t}`:this.elementClassName}getCalendarRows(){const t=Dt(this.currentDate,!0,this.firstDayOfWeek===0?7:this.firstDayOfWeek),e=[];for(let n=0;n<t.length;n+=7){const i=t.slice(n,n+7);e.push(i)}return e}getTitle(){if(this.currentDate)return Intl.DateTimeFormat(this.locale,{day:"numeric",month:"long",year:"numeric"}).format(this.currentDate)}focusDate(t){var e;(e=this.el.querySelector(`[data-date="${C(t)}"]`))===null||e===void 0||e.focus()}updateCurrentDate(t,e){const n=t.getMonth(),i=t.getFullYear();if(i>9999||i<0)return;(n!==this.currentDate.getMonth()||i!==this.currentDate.getFullYear())&&(this.changeMonth.emit({month:Me(t),year:Le(t)}),e&&(this.moveFocusAfterMonthChanged=!0)),this.currentDate=t,e&&this.focusDate(this.currentDate)}onSelectDate(t){var e,n;if(!this.disableDate(t))if(this.isRangeValue(this.value)){const i=((e=this.value)===null||e===void 0?void 0:e[0])===void 0||this.value.length===2?[t]:[this.value[0],t];i.length===2&&i[0]>i[1]&&i.reverse();const s=i[1]===void 0?[C(i[0])]:[C(i[0]),C(i[1])];this.value=i,this.selectDate.emit(s)}else{if(((n=this.value)===null||n===void 0?void 0:n.getTime())===t.getTime())return;this.value=t,this.selectDate.emit(C(t))}}isRangeValue(t){return this.range}render(){const t=this.showTodayButton||this.showClearButton;return f(ie,null,f("div",{"aria-disabled":String(this.disabled),"aria-label":this.labels.picker,class:{[this.getClassName()]:!0,[`${this.getClassName()}--disabled`]:this.disabled},role:"group"},f("div",{class:this.getClassName("header")},f("span",{"aria-atomic":"true","aria-live":"polite",class:"visually-hidden"},this.getTitle()),this.showYearStepper&&f("button",{"aria-label":this.labels.previousYearButton,class:this.getClassName("previous-year-button"),disabled:this.disabled,innerHTML:this.previousYearButtonContent||void 0,onClick:this.previousYear,type:"button"},f("svg",{fill:"none",height:"24","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24",width:"24"},f("polyline",{points:"11 17 6 12 11 7"}),f("polyline",{points:"18 17 13 12 18 7"}))),this.showMonthStepper&&f("button",{"aria-label":this.labels.previousMonthButton,class:this.getClassName("previous-month-button"),disabled:this.disabled,innerHTML:this.previousMonthButtonContent||void 0,onClick:this.previousMonth,type:"button"},f("svg",{fill:"none",height:"24","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24",width:"24"},f("polyline",{points:"15 18 9 12 15 6"}))),f("span",{class:this.getClassName("current-month")},f("select",{"aria-label":this.labels.monthSelect,class:this.getClassName("month-select"),disabled:this.disabled,name:"month",onChange:this.onMonthSelect},St(this.locale).map((e,n)=>f("option",{key:e,selected:this.currentDate.getMonth()===n,value:n+1},e))),f("input",{"aria-label":this.labels.yearSelect,class:this.getClassName("year-select"),disabled:this.disabled,max:9999,maxLength:4,min:1,name:"year",onChange:this.onYearSelect,type:"number",value:this.currentDate.getFullYear()})),this.showMonthStepper&&f("button",{"aria-label":this.labels.nextMonthButton,class:this.getClassName("next-month-button"),disabled:this.disabled,innerHTML:this.nextMonthButtonContent||void 0,onClick:this.nextMonth,type:"button"},f("svg",{fill:"none",height:"24","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24",width:"24"},f("polyline",{points:"9 18 15 12 9 6"}))),this.showYearStepper&&f("button",{"aria-label":this.labels.nextYearButton,class:this.getClassName("next-year-button"),disabled:this.disabled,innerHTML:this.nextYearButtonContent||void 0,onClick:this.nextYear,type:"button"},f("svg",{fill:"none",height:"24","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24",width:"24"},f("polyline",{points:"13 17 18 12 13 7"}),f("polyline",{points:"6 17 11 12 6 7"})))),f("div",{class:this.getClassName("body")},f("table",{class:this.getClassName("calendar"),onKeyDown:this.onKeyDown,role:"grid"},f("thead",{class:this.getClassName("calendar-header")},f("tr",{class:this.getClassName("weekday-row")},this.weekdays.map(e=>f("th",{abbr:e[1],class:this.getClassName("weekday"),key:e[0],scope:"col"},f("span",null,e[0]))))),f("tbody",null,this.getCalendarRows().map(e=>{const n=`row-${e[0].getMonth()}-${e[0].getDate()}`;return f("tr",{class:this.getClassName("calendar-row"),key:n},e.map(i=>{var s,r,o,a,l;const c=S(i,this.currentDate),u=i.getMonth()!==this.currentDate.getMonth(),d=Array.isArray(this.value)?S(i,this.value[0])||S(i,this.value[1]):S(i,this.value),h=this.isRangeValue?Ct(i,{from:(s=this.value)===null||s===void 0?void 0:s[0],to:((r=this.value)===null||r===void 0?void 0:r[1])||this.hoveredDate||this.currentDate}):!1,p=!((o=this.value)===null||o===void 0)&&o[0]?[(a=this.value)===null||a===void 0?void 0:a[0],((l=this.value)===null||l===void 0?void 0:l[1])||this.hoveredDate].sort((Ft,Ot)=>Ft-Ot):[],_=this.range&&S(p[0],i),k=this.range&&S(p[1],i),F=S(i,new Date),I=this.disableDate(i),It=`cell-${i.getMonth()}-${i.getDate()}`,Lt={[this.getClassName("date")]:!0,[this.getClassName("date--current")]:c,[this.getClassName("date--disabled")]:I,[this.getClassName("date--overflowing")]:u,[this.getClassName("date--today")]:F,[this.getClassName("date--selected")]:d,[this.getClassName("date--in-range")]:h,[this.getClassName("date--start")]:_,[this.getClassName("date--end")]:k},Nt=d?"strong":F?"em":"span";return f("td",{"aria-disabled":String(I),"aria-selected":d?"true":void 0,class:Lt,"data-date":C(i),key:It,onClick:this.onClick,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,role:"gridcell",tabIndex:S(i,this.currentDate)&&!this.disabled?0:-1},f(Nt,{"aria-hidden":"true"},i.getDate()),f("span",{class:"visually-hidden"},Intl.DateTimeFormat(this.locale,{day:"numeric",month:"long"}).format(i)))}))})))),t&&f("div",{class:this.getClassName("footer")},this.showTodayButton&&f("button",{class:this.getClassName("today-button"),disabled:this.disabled,innerHTML:this.todayButtonContent||void 0,onClick:this.showToday,type:"button"},this.labels.todayButton),this.showClearButton&&f("button",{class:this.getClassName("clear-button"),disabled:this.disabled,innerHTML:this.clearButtonContent||void 0,onClick:this.clear,type:"button"},this.labels.clearButton))))}get el(){return this}static get watchers(){return{firstDayOfWeek:["watchFirstDayOfWeek"],locale:["watchLocale"],range:["watchRange"],startDate:["watchStartDate"],value:["watchValue"]}}static get style(){return Mt}},[2,"wc-datepicker",{clearButtonContent:[1,"clear-button-content"],disabled:[4],disableDate:[16],elementClassName:[1,"element-class-name"],firstDayOfWeek:[2,"first-day-of-week"],range:[4],labels:[16],locale:[1],nextMonthButtonContent:[1,"next-month-button-content"],nextYearButtonContent:[1,"next-year-button-content"],previousMonthButtonContent:[1,"previous-month-button-content"],previousYearButtonContent:[1,"previous-year-button-content"],showClearButton:[4,"show-clear-button"],showMonthStepper:[4,"show-month-stepper"],showTodayButton:[4,"show-today-button"],showYearStepper:[4,"show-year-stepper"],startDate:[1,"start-date"],todayButtonContent:[1,"today-button-content"],value:[1040],currentDate:[32],hoveredDate:[32],weekdays:[32]}]);class Tt{constructor({apiKey:e,localServerBaseUrl:n,rootElementIdOverride:i,widgetPreview:s}){g(this,"apiKey","");g(this,"apiBaseUrl","");g(this,"defaultRequestHeaders");g(this,"widgetContainer",null);g(this,"form",null);g(this,"formId","rahui-booking-form");g(this,"datePickerId","date-picker");g(this,"timePickerHoursId","time-picker-hours");g(this,"timePickerMinutesId","time-picker-minutes");g(this,"datePickerHiddenInputId","hidden-date-input");g(this,"confirmationContainerElementId","confirmation-message-container");g(this,"confirmationBookingDatetimeElementId","confirmation-booking-datetime");g(this,"confirmationBookingCoversElementId","confirmation-booking-number-of-covers");g(this,"errorMessageElementId","error-message");g(this,"rootElementIdOverride");g(this,"localServerBaseUrl");g(this,"rootElementId","");g(this,"widgetPreview",!1);g(this,"heading","");g(this,"buttonText","");g(this,"maxCoversPerBooking");this.rootElementId,this.apiKey=e,this.apiBaseUrl=n||"https://www.rahui-booking.com",this.defaultRequestHeaders={"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},this.localServerBaseUrl=n,this.rootElementIdOverride=i,this.widgetPreview=s||!1,this.heading="Book a table",this.buttonText="Create booking",this.initialize()}async initialize(){await this.getWidgetSettings()}setupWidget(){var s;let e,n;this.widgetContainer=document.createElement("div"),this.widgetContainer.classList.add("widget__container"),this.createWidgetContent(),this.rootElementId.length?e=document.getElementById(this.rootElementId):(n=document.createElement("div"),document.body.appendChild(n)),(s=e||n)==null||s.appendChild(this.widgetContainer),this.form=document.getElementById(this.formId),this.form&&this.form.addEventListener("submit",this.formSubmit.bind(this)),customElements.get("wc-datepicker")||customElements.define("wc-datepicker",Bt);const i=document.getElementById(this.datePickerId);i&&(i.disableDate=function(r){const o=new Date,a=new Date(o.setHours(0,0,0));return new Date(r.setHours(15,0,0)).getTime()<a.getTime()},i.addEventListener("selectDate",r=>{const o=document.getElementById(this.datePickerHiddenInputId);o&&(o.value=r.detail),this.getOpeningHours(r.detail)})),this.getOpeningHours(),this.setupEventListenersForRequiredFields()}async getWidgetSettings(){const e=`${this.apiBaseUrl}/api/widgets/settings`,n=await fetch(e,{headers:this.defaultRequestHeaders,method:"GET"});if(n.status===200){const i=await n.json();this.applySettings(i),this.setupWidget()}else console.error({body:await n.json()})}applySettings(e){const{button_text:n,heading_text:i,max_covers_per_booking:s,root_element_id:r}=e;this.buttonText=n||this.buttonText,this.heading=i||this.heading,this.rootElementId=this.rootElementIdOverride||r||this.rootElementId,this.maxCoversPerBooking=s}async getOpeningHours(e=void 0){const n=Intl.DateTimeFormat().resolvedOptions().timeZone,i=e&&n?`?date=${e}&timezone=${n}`:void 0,s=i?`${this.apiBaseUrl}/api/widgets/opening_hours${i}`:`${this.apiBaseUrl}/api/widgets/opening_hours`,r=await fetch(s,{headers:this.defaultRequestHeaders,method:"GET"});if(r.status===200){const o=await r.json();this.applyOpeningHours(o)}else console.error({body:await r.json()})}applyOpeningHours(e){const n=document.getElementById(this.timePickerHoursId);if(n&&e){const{open_at:i,close_at:s}=e==null?void 0:e.opening_hours,r=Array.from(Array(23).keys()).map(a=>{const l=document.createElement("option");return l.value=String(a),l.innerHTML=a<10?String(a).padStart(2,"0"):String(a),l}),o=[];r.forEach(a=>{a.value>=i&&a.value<=s&&o.push(a)}),n.innerHTML="",n.append(...o)}}async formSubmit(e){e.preventDefault();const n=new FormData(e.target),i=Object.fromEntries(n.entries()),s=new Date(i["booking[date]"]),r=i["booking[time][hours]"],o=i["booking[time][minutes]"],l=new Date(s.setHours(parseInt(r),parseInt(o),0)).toUTCString(),c=String(i["booking[number_of_covers]"]),u=String(i["booking[notes]"]),d=String(i["customer[first_name]"]),h=String(i["customer[last_name]"]),p=String(i["customer[email]"]),_=String(i["customer[phone]"]),k={"widget-submission":!0,booking:{datetime:l,number_of_covers:c,notes:u},customer:{first_name:d,last_name:h,email:p,phone:_}};await this.forwardFormSubmissionToServer(k)}async forwardFormSubmissionToServer(e){const n=`${this.apiBaseUrl}/api/widgets/create_booking`;if(n&&e){const i=await fetch(n,{headers:this.defaultRequestHeaders,method:"POST",body:JSON.stringify(e)});if(this.hideErrorMessage(),i.status===201){const s=await i.json();this.hideForm(),this.showConfirmationMessage(s)}else console.error({body:await i.json()}),this.showErrorMessage()}}hideForm(){const e=document.getElementById(this.formId);e&&(e.style.visibility="hidden")}showConfirmationMessage(e){const n=document.getElementById(this.confirmationContainerElementId),i=document.getElementById(this.confirmationBookingDatetimeElementId),s=document.getElementById(this.confirmationBookingCoversElementId);if(!(!n||!e)){if(i){const r=new Date(e.datetime),o=Intl.DateTimeFormat().resolvedOptions().locale,a=new Intl.DateTimeFormat(o,{dateStyle:"full",timeStyle:"short"}).format(r);i.textContent=a}if(s){const r=String(e.number_of_covers),o=e.number_of_covers===1?`${r} Person | `:`${r} People | `;s.textContent=o}n.style.display="flex",n.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}}hideErrorMessage(){const e=document.getElementById(this.errorMessageElementId);e&&(e.style.display="none")}showErrorMessage(){const e=document.getElementById(this.errorMessageElementId);e&&(e.style.display="block")}createWidgetContent(){this.widgetContainer.innerHTML=v({heading:this.heading,buttonText:this.buttonText,formId:this.formId,maxCoversPerBooking:this.maxCoversPerBooking,datePickerHiddenInputId:this.datePickerHiddenInputId,datePickerId:this.datePickerId,timePickerHoursId:this.timePickerHoursId,timePickerMinutesId:this.timePickerMinutesId,widgetPreview:this.widgetPreview})}setupEventListenersForRequiredFields(){const e=document.getElementById("customer_first_name"),n=document.getElementById("customer_last_name");[e,n].forEach(i=>{const s=[e,n];this.handleToggleRequiredFields({relatedFields:s}),i&&i.addEventListener("change",()=>this.handleToggleRequiredFields({relatedFields:s}))})}getRequiredSymbolFor(e){const n=e.id+"_required_symbol";return document.getElementById(n)}toggleRequiredSymbolFor(e){const n=this.getRequiredSymbolFor(e);n&&(n.style.display="none")}handleToggleRequiredFields({relatedFields:e}){const[n,i]=e,s=e.every(o=>o.value.length>0),r=e.every(o=>o.value.length===0);(s||r)&&e.forEach(o=>{const a=this.getRequiredSymbolFor(o);a&&(a.style.display="inline"),o.required=!0}),n.value.length>0&&i.value.length===0&&(this.toggleRequiredSymbolFor(i),i.required=!1),i.value.length>0&&n.value.length===0&&(this.toggleRequiredSymbolFor(n),n.required=!1)}}window.RahuiWidget=Tt})();
